<div class="overScroll">
    <table mat-table [dataSource]="dataSource" class="mat-table">
        <!-- Checkbox Column -->
        @if(isColumnSelectable){
        <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef class="checkRow">
                <mat-checkbox (change)="$event ? masterToggle() : null"
                    [checked]="selection.hasValue() && isAllSelected()"
                    [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
                </mat-checkbox>
            </th>
            <td mat-cell *matCellDef="let row" class="checkRow">
                <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                    [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
                </mat-checkbox>
            </td>
        </ng-container>
        }
        <ng-container *ngFor="let column of columnConfigs" [matColumnDef]="column.key">
            <th mat-header-cell *matHeaderCellDef>{{ column.displayName | translate}}</th>
            <td mat-cell *matCellDef="let row">
                @if(!column.isLink && !column.isStatus && !column.isAction && !column.isImage && !column.isDate &&
                !column.isNumber && !column.isDateTime && !column.isTextStatus && !column.isPrice && !column.isArray){
                <ng-container>
                    <span>
                        {{ row[column.key] }}
                    </span>
                </ng-container>
                }
                @if(column.isImage){
                <ng-container>
                    <img [src]="row[column.key]" alt="Logo" class="table-logo" />
                </ng-container>
                }
                @if(column.isLink){
                <ng-container>
                    <button (click)="handleLinkClick(row)" class="border-0 p-0 bg-transparent link_btn">
                        {{ row[column.key] }}
                    </button>
                </ng-container>
                }
                @if(column.isStatus){
                <ng-container>
                    <span class="status" [ngClass]="row[column.key]">
                        {{ row[column.key] }}
                    </span>
                </ng-container>
                }
                @if(column.isDate){
                <ng-container>
                    {{ row[column.key] | date: 'longDate' }}
                </ng-container>
                }
                @if(column.isDateTime){
                <ng-container>
                    {{ row[column.key] | date: 'medium' }}

                </ng-container>
                }
                @if(column.isNumber){
                <ng-container>
                    {{ row[column.key] | number: '1.2-2' }}
                </ng-container>
                }
                @if(column.isPrice){
                <ng-container>
                    {{ row[column.key] }}
                    <img src="assets/images/saudi_riyal.svg" alt="saudi_riyal" class="ms_8" />
                </ng-container>
                }
                <ng-container>
                    @for(action of column.actions; track action){
                    <button *ngIf="!action.allowedStatuses || action.allowedStatuses.includes(row.status)"
                        class="border-0 p-0 icon d-inline-flex justify-content-center align-items-center"
                        [ngClass]="'icon_'+ action.type" (click)="handleActionClick(row, action.type)">
                        @if(action.type === 'delete'){
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M15.8408 22.25H8.16082C7.39244 22.2389 6.65657 21.9381 6.10037 21.4079C5.54416 20.8776 5.20861 20.157 5.16082 19.39L4.25082 5.55C4.24615 5.44966 4.26143 5.34938 4.29576 5.25498C4.33009 5.16057 4.38279 5.07391 4.45082 5C4.52091 4.9234 4.60576 4.86177 4.70028 4.81881C4.7948 4.77584 4.89703 4.75244 5.00082 4.75H19.0008C19.1037 4.74977 19.2055 4.7707 19.2999 4.81148C19.3943 4.85226 19.4793 4.91202 19.5496 4.98704C19.62 5.06207 19.6741 5.15077 19.7087 5.24761C19.7434 5.34446 19.7577 5.44739 19.7508 5.55L18.8808 19.39C18.8325 20.1638 18.4913 20.8902 17.9267 21.4214C17.362 21.9527 16.6161 22.249 15.8408 22.25ZM5.84082 6.25L6.61082 19.3C6.63626 19.6935 6.81073 20.0625 7.0987 20.3319C7.38667 20.6013 7.76649 20.7508 8.16082 20.75H15.8408C16.2345 20.7485 16.613 20.5982 16.9004 20.3292C17.1879 20.0603 17.3631 19.6927 17.3908 19.3L18.2008 6.3L5.84082 6.25Z"
                                fill="#04528E" />
                            <path
                                d="M21 6.25H3C2.80109 6.25 2.61032 6.17098 2.46967 6.03033C2.32902 5.88968 2.25 5.69891 2.25 5.5C2.25 5.30109 2.32902 5.11032 2.46967 4.96967C2.61032 4.82902 2.80109 4.75 3 4.75H21C21.1989 4.75 21.3897 4.82902 21.5303 4.96967C21.671 5.11032 21.75 5.30109 21.75 5.5C21.75 5.69891 21.671 5.88968 21.5303 6.03033C21.3897 6.17098 21.1989 6.25 21 6.25Z"
                                fill="#04528E" />
                            <path
                                d="M15 6.25H9C8.80189 6.24741 8.61263 6.16756 8.47253 6.02747C8.33244 5.88737 8.25259 5.69811 8.25 5.5V3.7C8.26268 3.18682 8.47219 2.69816 8.83518 2.33518C9.19816 1.97219 9.68682 1.76268 10.2 1.75H13.8C14.3217 1.76305 14.8177 1.97951 15.182 2.35317C15.5463 2.72684 15.7502 3.22812 15.75 3.75V5.5C15.7474 5.69811 15.6676 5.88737 15.5275 6.02747C15.3874 6.16756 15.1981 6.24741 15 6.25ZM9.75 4.75H14.25V3.75C14.25 3.63065 14.2026 3.51619 14.1182 3.4318C14.0338 3.34741 13.9193 3.3 13.8 3.3H10.2C10.0807 3.3 9.96619 3.34741 9.8818 3.4318C9.79741 3.51619 9.75 3.63065 9.75 3.75V4.75Z"
                                fill="#04528E" />
                            <path
                                d="M15 18.25C14.8019 18.2474 14.6126 18.1676 14.4725 18.0275C14.3324 17.8874 14.2526 17.6981 14.25 17.5V9.5C14.25 9.30109 14.329 9.11032 14.4697 8.96967C14.6103 8.82902 14.8011 8.75 15 8.75C15.1989 8.75 15.3897 8.82902 15.5303 8.96967C15.671 9.11032 15.75 9.30109 15.75 9.5V17.5C15.7474 17.6981 15.6676 17.8874 15.5275 18.0275C15.3874 18.1676 15.1981 18.2474 15 18.25Z"
                                fill="#04528E" />
                            <path
                                d="M9 18.25C8.80189 18.2474 8.61263 18.1676 8.47253 18.0275C8.33244 17.8874 8.25259 17.6981 8.25 17.5V9.5C8.25 9.30109 8.32902 9.11032 8.46967 8.96967C8.61032 8.82902 8.80109 8.75 9 8.75C9.19891 8.75 9.38968 8.82902 9.53033 8.96967C9.67098 9.11032 9.75 9.30109 9.75 9.5V17.5C9.74741 17.6981 9.66756 17.8874 9.52747 18.0275C9.38737 18.1676 9.19811 18.2474 9 18.25Z"
                                fill="#04528E" />
                            <path
                                d="M12 18.25C11.8019 18.2474 11.6126 18.1676 11.4725 18.0275C11.3324 17.8874 11.2526 17.6981 11.25 17.5V9.5C11.25 9.30109 11.329 9.11032 11.4697 8.96967C11.6103 8.82902 11.8011 8.75 12 8.75C12.1989 8.75 12.3897 8.82902 12.5303 8.96967C12.671 9.11032 12.75 9.30109 12.75 9.5V17.5C12.7474 17.6981 12.6676 17.8874 12.5275 18.0275C12.3874 18.1676 12.1981 18.2474 12 18.25Z"
                                fill="#04528E" />
                        </svg>
                        }
                        @if(action.type === 'Archive'){
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="#04528E"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M6 2C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2H6ZM13 9H19V20C19 20.55 18.55 21 18 21H6C5.45 21 5 20.55 5 20V4C5 3.45 5.45 3 6 3H13V9ZM12 11C9.24 11 7 13.24 7 16C7 18.76 9.24 21 12 21C14.76 21 17 18.76 17 16C17 13.24 14.76 11 12 11ZM12 12.5C13.93 12.5 15.5 14.07 15.5 16C15.5 17.93 13.93 19.5 12 19.5C10.07 19.5 8.5 17.93 8.5 16C8.5 14.07 10.07 12.5 12 12.5ZM12.25 13V16.25L14.5 17.55L14 18.35L11.5 16.85V13H12.25Z" />
                        </svg>

                        }

                        @if(action.type === 'edit'){
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_27_1170)">
                                <path
                                    d="M19.9165 0.905636C18.7068 -0.301879 16.7479 -0.301879 15.5383 0.905636L14.4423 2.00759L2.77609 13.6676L2.7513 13.6926C2.7453 13.6986 2.7453 13.705 2.7389 13.705C2.72651 13.7236 2.70791 13.742 2.69571 13.7606C2.69571 13.7668 2.68932 13.7668 2.68932 13.773C2.67692 13.7916 2.67092 13.804 2.65833 13.8226C2.65232 13.8288 2.65232 13.8348 2.64612 13.8412C2.63993 13.8598 2.63373 13.8722 2.62733 13.8908C2.62733 13.8968 2.62133 13.8968 2.62133 13.9032L0.0329398 21.6867C-0.0429899 21.9083 0.0147322 22.1538 0.181506 22.3182C0.298694 22.4338 0.456752 22.4985 0.621202 22.498C0.688415 22.4968 0.755047 22.4863 0.819355 22.467L8.59692 19.8724C8.60293 19.8724 8.60293 19.8724 8.60932 19.8664C8.62888 19.8606 8.64767 19.8522 8.66491 19.8414C8.66975 19.8408 8.67401 19.8387 8.6775 19.8354C8.6959 19.823 8.7207 19.8104 8.73929 19.798C8.75769 19.7858 8.77648 19.7672 8.79508 19.7548C8.80127 19.7484 8.80728 19.7484 8.80728 19.7424C8.81367 19.7362 8.82607 19.7302 8.83226 19.7176L21.5945 6.95541C22.802 5.74577 22.802 3.7869 21.5945 2.57745L19.9165 0.905636ZM8.39877 18.4171L4.08898 14.1075L14.8758 3.32067L19.1856 7.63026L8.39877 18.4171ZM3.48193 15.2531L7.24704 19.018L1.59337 20.9003L3.48193 15.2531ZM20.7215 6.08842L20.065 6.75106L15.755 2.44108L16.4179 1.77863C17.1429 1.0542 18.3181 1.0542 19.0433 1.77863L20.7275 3.46284C21.4471 4.19115 21.4443 5.3636 20.7215 6.08842Z"
                                    fill="#04528E" />
                            </g>
                            <defs>
                                <clipPath id="clip0_27_1170">
                                    <rect width="24" height="24" fill="white" />
                                </clipPath>
                            </defs>
                        </svg>
                        }
                        @if(action.type === 'view'){

                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z"
                                stroke="#04528E" />
                            <path d="M21 12C21 12 18 18 12 18C6 18 3 12 3 12C3 12 6 6 12 6C18 6 21 12 21 12Z"
                                stroke="#04528E" />
                        </svg>
                        }

                    </button>
                    }
                </ng-container>
            </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <!-- Pagination -->
    <div *ngIf="showPagination">
        <ngb-pagination [collectionSize]="collectionSize" [page]="pageNumber" [pageSize]="pageSize"
            aria-label="Default pagination" (pageChange)="onPageChange($event)" [maxSize]="7" [rotate]="true"
            [ellipses]="false" [boundaryLinks]="true" class="mt-3" *ngIf="dataSource && dataSource.data.length > 0">
        </ngb-pagination>
    </div>
    <!-- No Data Message -->
    <div class="no_data text-center p-24 w-100" *ngIf="!dataSource || dataSource.data.length == 0">
        <p class="fs-24 fw-500 mt_32 mb_32">{{ noDataMessage }}</p>
        <img src="../../../../assets/images/no_data.png" alt="No Data">

    </div>
</div>